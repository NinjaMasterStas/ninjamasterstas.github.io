import{createHeader}from"./js/header";import{createFooter}from"./js/footer";import{createBreadcrumb}from"./js/breadcrumb";import"./css/zero-styles.css";import"./css/basket.css";import"./css/main-styles.css";import"./css/header-footer.css";import"./css/breadcrumb.css";import"./css/select.css";import"./css/shop.css";import{initSelectMenus}from"./js/selectMenu";import img01 from"./img/shop/small/syltherine.png";import img02 from"./img/shop/small/leviosa.png";import img03 from"./img/shop/small/lolito.png";import img04 from"./img/shop/small/respira.png";import{addItemToBasket,basketInit}from"./js/basket";const app=document.querySelector(".wrapper");app.insertAdjacentHTML("afterbegin",createBreadcrumb("Shop")),app.insertAdjacentHTML("afterbegin",createHeader()),app.insertAdjacentHTML("beforeend",createFooter()),basketInit();const filter=document.querySelector(".filter"),filterOpenButton=document.querySelector(".show-settings__filter"),filterCloseButton=filter.querySelector(".filter__close-button"),products=[{title:"Syltherine",subtitle:"Stylish cafe chair",category:"Dining",img:img01,price:25e3,oldPrice:5e4},{title:"Leviosa",subtitle:"Stylish cafe chair",category:"Dining",img:img02,price:25e3,oldPrice:-1},{title:"Lolito",subtitle:"Luxury big sofa",category:"Living",img:img03,price:7e4,oldPrice:14e4},{title:"Respira",subtitle:"Outdoor bar table and stool",category:"Other",img:img04,price:5e3,oldPrice:-1},{title:"Syltherine",subtitle:"Stylish cafe chair",category:"Dining",img:img01,price:25e3,oldPrice:5e4},{title:"Leviosa",subtitle:"Stylish cafe chair",category:"Dining",img:img02,price:25e3,oldPrice:-1},{title:"Lolito",subtitle:"Luxury big sofa",category:"Living",img:img03,price:7e4,oldPrice:14e4},{title:"Respira",subtitle:"Outdoor bar table and stool",category:"Other",img:img04,price:5e3,oldPrice:-1},{title:"Syltherine",subtitle:"Stylish cafe chair",category:"Dining",img:img01,price:25e3,oldPrice:5e4},{title:"Leviosa",subtitle:"Stylish cafe chair",category:"Dining",img:img02,price:25e3,oldPrice:-1},{title:"Lolito",subtitle:"Luxury big sofa",category:"Living",img:img03,price:7e4,oldPrice:14e4},{title:"Respira",subtitle:"Outdoor bar table and stool",category:"Other",img:img04,price:5e3,oldPrice:-1},{title:"Syltherine",subtitle:"Stylish cafe chair",category:"Dining",img:img01,price:25e3,oldPrice:5e4},{title:"Leviosa",subtitle:"Stylish cafe chair",category:"Dining",img:img02,price:25e3,oldPrice:-1},{title:"Lolito",subtitle:"Luxury big sofa",category:"Living",img:img03,price:7e4,oldPrice:14e4},{title:"Respira",subtitle:"Outdoor bar table and stool",category:"Other",img:img04,price:5e3,oldPrice:-1},{title:"Syltherine",subtitle:"Stylish cafe chair",category:"Dining",img:img01,price:25e3,oldPrice:5e4},{title:"Leviosa",subtitle:"Stylish cafe chair",category:"Dining",img:img02,price:25e3,oldPrice:-1},{title:"Lolito",subtitle:"Luxury big sofa",category:"Living",img:img03,price:7e4,oldPrice:14e4},{title:"Respira",subtitle:"Outdoor bar table and stool",category:"Other",img:img04,price:5e3,oldPrice:-1}];products.forEach(((e,t)=>{e.id=t}));let isFiltering=localStorage.getItem("isFiltering")||!1,isSorting=localStorage.getItem("isSorting")||!1;const filters=JSON.parse(localStorage.getItem("filters"))||{minPrice:null,maxPrice:null,categories:null};let sortType=localStorage.getItem("sortType")||"Default";initSelectMenus(changeShowCount,sortProducts);const filterAllCheckbox=filter.querySelectorAll(".all-checkbox input");let filterAllCheckboxState=JSON.parse(localStorage.getItem("filterAllCheckbox"))||[];filterAllCheckbox[0].addEventListener("click",(()=>{filterAllCheckboxState[0]=!filterAllCheckboxState[0],filterAllCheckbox.forEach(((e,t)=>{t>0&&(e.checked=filterAllCheckbox[0].checked,filterAllCheckboxState[t]=filterAllCheckbox[0].checked||!1)})),localStorage.setItem("filterAllCheckbox",JSON.stringify(filterAllCheckboxState))})),filterAllCheckbox.forEach(((e,t)=>{null!=filterAllCheckboxState[t]&&(e.checked=!0===filterAllCheckboxState[t]),t>0&&e.addEventListener("click",(()=>{filterAllCheckbox[0].checked=!1,filterAllCheckboxState[0]=!1,filterAllCheckboxState[t]=!filterAllCheckboxState[t],localStorage.setItem("filterAllCheckbox",JSON.stringify(filterAllCheckboxState))}))})),filterOpenButton.addEventListener("click",(e=>{e.target.closest(".filter")||filter.classList.toggle("filter_active")})),filterCloseButton.addEventListener("click",(()=>{filter.classList.remove("filter_active")})),filter.addEventListener("reset",(()=>{const e=filter.querySelector(".slider__progress");e.style.left="0",e.style.right="0"}));const productsContainer=document.querySelector(".shop__body"),showCountText=document.querySelector(".show-settings__info");function filterAndSortProducts(){let e=JSON.parse(JSON.stringify(products));if(isFiltering&&(e=e.filter((e=>{const t=e.price>=filters.minPrice&&e.price<=filters.maxPrice,i=filters.categories[e.category];return t&&i}))),isSorting)switch(sortType){case"Default":e=e.sort(((e,t)=>e.id-t.id));break;case"Price":e=e.sort(((e,t)=>e.price-t.price))}return e}let productCount=products.length;const pagesButtons=document.querySelector(".shop__pages-buttons");let currentPage=parseInt(localStorage.getItem("currentPage"))||0,showCount=parseInt(localStorage.getItem("showCount"))||16;function changeShowCount(e){showCount=e,localStorage.setItem("showCount",e),updateProductsContainer()}function updatePagesButtons(){pagesButtons.innerHTML="";for(let e=0;e*showCount<productCount;e++){let t=document.createElement("button");t.innerText=e+1,t.classList.add("shop__page-button"),e===currentPage&&t.classList.add("shop__page-button--active"),pagesButtons.insertAdjacentElement("beforeend",t),t.addEventListener("click",(t=>{for(let e=0;e<pagesButtons.children.length;e++)pagesButtons.children[e].classList.remove("shop__page-button--active"),console.log(pagesButtons.children[e]);pagesButtons.children[e].classList.add("shop__page-button--active"),currentPage=e,localStorage.setItem("currentPage",currentPage),updateProductsContainer(parseInt(t.target.innerText)-1)}))}}function updateProductsContainer(){let e=filterAndSortProducts();productCount=e.length,productsContainer.innerHTML="",e.forEach(((e,t)=>{if(t>=currentPage*showCount&&t<(currentPage+1)*showCount){const t=document.createElement("article");t.classList.add("item"),t.innerHTML=`<div class="item__select">\n                            <button class="item__add-to-card-button">Add to cart</button>\n                        </div>\n                        <img class="item__image" src=${e.img} alt="">\n                        <div class="item__body">\n                            <header class="item__header">\n                                <h2 class="item__title">${e.title}</h2>\n                                <h3 class="item__subtitle">${e.subtitle}</h3>\n                            </header>\n                            <div class="item__prices">\n                                <span class="item__price item__price--new">${e.price+"$"}</span>\n                            </div>\n                        </div>`,-1!==e.oldPrice&&t.querySelector(".item__prices").insertAdjacentHTML("beforeend",`<span class="item__price item__price--old">${e.oldPrice+"$"}</span>`),t.querySelector(".item__add-to-card-button").addEventListener("click",(()=>{addItemToBasket(e.img,e.title,e.price)})),productsContainer.insertAdjacentElement("beforeend",t)}}));const t=e.length>0?currentPage*showCount+1:currentPage*showCount;showCountText.innerText=`Showing ${t}–${currentPage*showCount+Math.min(e.length-showCount*currentPage,showCount)} of ${e.length} results`,updatePagesButtons()}function sortProducts(e){isSorting=!0,sortType=e,localStorage.setItem("isSorting",!0),localStorage.setItem("sortType",e),currentPage=0,localStorage.setItem("currentPage",0),updateProductsContainer()}updatePagesButtons(),updateProductsContainer(),filter.addEventListener("submit",(e=>{e.preventDefault(),isFiltering=!0,localStorage.setItem("isFiltering",!0);const t=new FormData(e.target);filters.minPrice=t.get("input-min"),filters.maxPrice=t.get("input-max"),filters.categories={Other:t.get("All"),Dining:t.get("Dining"),Living:t.get("Living"),Bedroom:t.get("Bedroom")},localStorage.setItem("filters",JSON.stringify(filters)),filter.classList.toggle("filter_active"),updateProductsContainer()})),document.querySelectorAll(".basket__button").forEach((e=>{e.addEventListener("click",(()=>{alert("Этого я не сделал, да и это не нужно")}))}));